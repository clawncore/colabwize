<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6XLRMVPDKX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-6XLRMVPDKX');
  </script>

  <script>
  (function() {
    var lz = window.linkzy = window.linkzy || {};
    lz.apiKey = 'linkzy_simbisaichinhema14_gmail_com_1766667515247';
    const anonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNsamx3dnJ0d3FtaG1qdW55cGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4NTkzMDMsImV4cCI6MjA2NjQzNTMwM30.xJNGPIQ51XpdekFSQQ0Ymk4G3A86PZ4KRqKptRb-ozU';
    const baseUrl = 'https://sljlwvrtwqmhmjunyplr.supabase.co/functions/v1';

    window.addEventListener('load', function() {
      var currentUrl = window.location.href.toLowerCase();
      var currentPath = window.location.pathname.toLowerCase();

      // Skip homepage
      if (
        currentPath === '/' || currentPath === '/index.html' || currentPath === '' ||
        currentUrl.endsWith('/#') || currentUrl.endsWith('/index.html')
      ) {
        console.log('Linkzy: Skipping homepage placement');
        return;
      }

      // Determine if this is a content-rich page
      var validPages =
        currentPath.includes('/blog') || 
        currentPath.includes('/article') || 
        currentPath.includes('/post') || 
        currentPath.includes('/about') || 
        currentPath.includes('/service') || 
        currentPath.includes('/page') ||
        document.querySelector('article') ||
        document.querySelector('.blog-post') ||
        document.querySelector('.post-content') ||
        (document.body && document.body.innerText.length > 500);

      if (!validPages) {
        console.log('Linkzy: Page not suitable for placement:', currentPath);
        return;
      }

      // --- Track content ---
      lz.track = function() {
        fetch(`${baseUrl}/track-content`, {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + anonKey
          },
          body: JSON.stringify({
            apiKey: lz.apiKey,
            url: window.location.href,
            title: document.title,
            referrer: document.referrer,
            timestamp: new Date().toISOString(),
            content: document.body ? document.body.innerText.slice(0, 1000) : ''
          })
        });
      };

      // --- Execute backlink placements ---
      lz.executePlacements = function() {
        fetch(`${baseUrl}/get-placement-instructions`, {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + anonKey
          },
          body: JSON.stringify({ apiKey: lz.apiKey, url: window.location.href })
        })
        .then(res => res.json())
        .then(data => {
          if (!data.success || !data.instructions?.length) return;

          data.instructions.forEach(instruction => {
            try {
              const instructionData = instruction.instruction_data;
              if (instructionData.type !== 'backlink_placement') return;

              const contentArea =
                document.querySelector('article .content') ||
                document.querySelector('.post-content') ||
                document.querySelector('.blog-content') ||
                document.querySelector('article') ||
                document.querySelector('.content') ||
                document.querySelector('main');

              if (contentArea && instructionData.paragraph) {
                const paragraphs = contentArea.querySelectorAll('p');
                let targetParagraph = null;

                for (let i = 0; i < paragraphs.length; i++) {
                  if (paragraphs[i].innerText.length > 100) {
                    targetParagraph = paragraphs[i];
                    break;
                  }
                }

                if (targetParagraph) {
                  const newPara = document.createElement('p');
                  newPara.innerHTML = instructionData.paragraph;
                  newPara.style.margin = '16px 0';
                  newPara.style.lineHeight = '1.6';
                  targetParagraph.parentNode.insertBefore(newPara, targetParagraph.nextSibling);

                  console.log('Linkzy: Backlink placed successfully on', currentPath);

                  fetch(`${baseUrl}/update-placement-instruction`, {
                    method: 'POST',
                    headers: { 
                      'Content-Type': 'application/json',
                      'Authorization': 'Bearer ' + anonKey
                    },
                    body: JSON.stringify({
                      instructionId: instruction.id,
                      status: 'completed',
                      apiKey: lz.apiKey
                    })
                  });
                } else {
                  console.log('Linkzy: No suitable paragraph found for placement');
                }
              }
            } catch (e) {
              console.error('Linkzy placement error:', e);
            }
          });
        })
        .catch(e => console.error('Linkzy instructions error:', e));
      };

      // Execute both
      lz.track();
      lz.executePlacements();
    });
  })();
  </script>
  <meta charset="utf-8" />
  <link rel="icon" type="image/x-icon" href="%PUBLIC_URL%/favicon/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="%PUBLIC_URL%/favicon/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="%PUBLIC_URL%/favicon/favicon-16x16.png" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="%PUBLIC_URL%/favicon/site.webmanifest" />
  <meta name="theme-color" content="#000000" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="ColabWize">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="description"
    content="ColabWize - Your Entire Academic Workflow, Unified. Write smarter, cite faster, and check originality — all in one beautiful workspace built for students and researchers. Launching January 1, 2026. Join the Waitlist." />
  <meta name="keywords"
    content="academic writing, citation tool, plagiarism checker, collaboration tool, research writing, student tools, academic productivity" />
  <meta name="author" content="ColabWize" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://colabwize.com/" />
  <meta property="og:title" content="ColabWize - Your Entire Academic Workflow, Unified" />
  <meta property="og:description"
    content="Write smarter, cite faster, and check originality — all in one beautiful workspace built for students and researchers. Launching January 1, 2026. Join the Waitlist." />
  <meta property="og:image" content="https://colabwize.com/logo.png" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://colabwize.com/" />
  <meta property="twitter:title" content="ColabWize - Your Entire Academic Workflow, Unified" />
  <meta property="twitter:description"
    content="Write smarter, cite faster, and check originality — all in one beautiful workspace built for students and researchers. Launching January 1, 2026. Join the Waitlist." />
  <meta property="twitter:image" content="https://colabwize.com/logo.png" />

  <!-- Canonical -->
  <link rel="canonical" href="https://colabwize.com/" />

  <!-- JSON-LD Schemas -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "ColabWize",
        "description": "An academic platform offering AI citation generation, plagiarism checking, and team collaboration.",
        "applicationCategory": "EducationalApplication",
        "operatingSystem": "Web",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        }
      }
      </script>

  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "ColabWize",
        "url": "https://colabwize.com/",
        "logo": "https://colabwize.com/logo.png",
        "sameAs": [
          "https://x.com/colabwize",
          "https://www.linkedin.com/company/colabwize"
        ]
      }
      </script>

  <title>ColabWize - Your Entire Academic Workflow, Unified</title>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
</body>

</html>